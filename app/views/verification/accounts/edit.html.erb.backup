<div class="max-w-2xl mx-auto px-4 py-8">
  <div class="mb-6">
    <%= link_to "â† Back", verification_account_path(@account), class: "text-purple-600 hover:text-purple-800" %>
  </div>

  <div class="bg-white rounded-lg shadow">
    <div class="px-6 py-4 border-b border-gray-200">
      <div class="flex items-center gap-3">
        <%= platform_icon(@account.platform, size: 28) %>
        <div>
          <h1 class="text-xl font-bold text-gray-900">Edit & Verify <%= @account.platform %> Account</h1>
          <p class="text-gray-600"><%= @person.full_name %></p>
        </div>
      </div>
    </div>

    <div class="p-6">
      <%= form_with model: @account, url: verify_with_changes_verification_account_path(@account), method: :patch, class: "space-y-6" do |f| %>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h3 class="text-sm font-semibold text-blue-900 mb-2">Edit & Verify Workflow</h3>
          <p class="text-sm text-blue-800">
            Make any necessary corrections below, specify where you validated the information, and click "Save & Verify" to complete verification.
          </p>
        </div>

        <!-- URL Field -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Account URL *
          </label>
          <%= f.url_field :url,
              class: "w-full px-4 py-2.5 rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",
              placeholder: "https://...",
              required: true %>
          <% if @account.url.present? %>
            <a href="<%= @account.url %>" target="_blank" class="text-xs text-blue-600 hover:text-blue-800 mt-1 inline-block">
              Open current URL in new tab â†’
            </a>
          <% end %>
        </div>

        <!-- Handle Field -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Handle/Username
          </label>
          <%= f.text_field :handle,
              class: "w-full px-4 py-2.5 rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",
              placeholder: "@username" %>
        </div>

        <!-- Validation Source -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Where did you validate this? *
          </label>
          <div class="space-y-2">
            <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
              <%= radio_button_tag :validation_source, 'google', false, required: true, class: "text-purple-600 focus:ring-purple-500" %>
              <span class="ml-3 text-sm font-medium text-gray-900">
                ğŸ” Google Search
              </span>
            </label>
            <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
              <%= radio_button_tag :validation_source, 'official_website', false, class: "text-purple-600 focus:ring-purple-500" %>
              <span class="ml-3 text-sm font-medium text-gray-900">
                ğŸŒ Official Website/Campaign Site
              </span>
            </label>
            <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
              <%= radio_button_tag :validation_source, 'social_platform', false, class: "text-purple-600 focus:ring-purple-500" %>
              <span class="ml-3 text-sm font-medium text-gray-900">
                ğŸ“± Searched directly on <%= @account.platform %>
              </span>
            </label>
            <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
              <%= radio_button_tag :validation_source, 'verified_badge', false, class: "text-purple-600 focus:ring-purple-500" %>
              <span class="ml-3 text-sm font-medium text-gray-900">
                âœ“ Verified Badge on Platform
              </span>
            </label>
            <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
              <%= radio_button_tag :validation_source, 'cross_reference', false, class: "text-purple-600 focus:ring-purple-500" %>
              <span class="ml-3 text-sm font-medium text-gray-900">
                ğŸ”— Cross-referenced with other accounts
              </span>
            </label>
            <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
              <%= radio_button_tag :validation_source, 'other', false, class: "text-purple-600 focus:ring-purple-500" %>
              <span class="ml-3 text-sm font-medium text-gray-900">
                ğŸ“ Other (specify in notes)
              </span>
            </label>
          </div>
        </div>

        <!-- Notes -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Verification Notes (optional)
          </label>
          <%= f.text_area :verification_notes,
              rows: 3,
              class: "w-full px-4 py-2.5 rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",
              placeholder: "Add any additional notes about this verification..." %>
        </div>

        <% if @account.entered_by %>
          <div class="text-sm text-gray-600 pt-2 border-t">
            Originally entered by <%= @account.entered_by.name.presence || @account.entered_by.email %> Â· <%= time_ago_in_words(@account.entered_at) %> ago
          </div>
        <% end %>

        <!-- Action Buttons -->
        <div class="flex gap-3 pt-4 border-t">
          <%= f.submit "âœ“ Save & Verify", class: "flex-1 px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 cursor-pointer" %>
          <%= link_to "Cancel", verification_account_path(@account), class: "px-6 py-3 text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-300" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
