module SocialMediaHelper
  def platform_icon(platform, size: 20)
    svg = platform_svg(platform&.downcase)
    content_tag(:span, svg.html_safe, class: "inline-flex items-center justify-center", style: "width:#{size}px;height:#{size}px;color:#{platform_color(platform&.downcase)}")
  end

  private

  def platform_color(platform)
    case platform
    when 'facebook'    then '#1877F2'
    when 'twitter'     then '#000000'
    when 'instagram'   then '#E4405F'
    when 'youtube'     then '#FF0000'
    when 'tiktok'      then '#000000'
    when 'bluesky'     then '#0085FF'
    when 'truthsocial' then '#5448EE'
    when 'gettr'       then '#FF0000'
    when 'rumble'      then '#85C742'
    when 'telegram'    then '#26A5E4'
    when 'threads'     then '#000000'
    else '#6B7280'
    end
  end

  def platform_svg(platform)
    case platform
    when 'facebook'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 1.092.044 1.545.108v3.28c-.168-.018-.468-.027-.843-.027-1.197 0-1.66.453-1.66 1.632v2.564h2.388l-.41 3.667h-1.978v8.06A11.04 11.04 0 0012 24c-.337 0-.67-.015-1-.044a11.08 11.08 0 01-1.899-.265z"/></svg>'
    when 'twitter'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>'
    when 'instagram'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8504.6151 19.0872.32 18.2143.1197 16.9366.0633 15.6588.0067 15.2479-.0067 11.9999 0 8.7521.0067 8.3441.0197 7.0681.084m.2139 21.8318c-1.1715-.0541-1.8063-.2518-2.2286-.4188-.5604-.2178-.9603-.4783-1.3803-.8983-.42-.42-.6801-.8186-.8983-1.3803-.167-.4225-.3647-1.0568-.4189-2.2282-.0585-1.2676-.0709-1.6483-.0757-4.8566-.0048-3.2084.0066-3.5888.0631-4.8571C2.5093 6.2 2.7074 5.5651 2.8744 5.1428c.2178-.5605.4783-.9608.8982-1.3809.4197-.4197.8186-.6803 1.3803-.898.4224-.1666 1.0571-.3648 2.2286-.4184 1.2676-.0586 1.6483-.071 4.8567-.0757 3.2083-.005 3.5891.0067 4.8574.0631 1.1713.0543 1.8058.2526 2.2283.4188.5603.2178.96.4783 1.3803.8983.4196.4202.68.8186.898 1.3806.1666.4224.3645 1.0568.4188 2.2282.0586 1.2676.0706 1.6483.0757 4.8567.005 3.2083-.007 3.5891-.0632 4.857-.0543 1.1714-.2526 1.8059-.4188 2.2283-.2178.5604-.4783.9603-.8983 1.3803-.4196.42-.8186.6801-1.3803.8983-.4224.1667-1.057.3648-2.2282.4184-1.2676.0586-1.6483.071-4.8567.0757-3.2084.005-3.5888-.0067-4.8574-.0631M16.953 5.5864A1.44 1.44 0 1018.39 4.144a1.44 1.44 0 00-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 114.008 3.9921A3.9996 3.9996 0 018 12.0077"/></svg>'
    when 'youtube'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>'
    when 'tiktok'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>'
    when 'bluesky'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.785 2.643 3.593 3.519 6.173 3.175-.363.06-.727.098-1.09.098-2.907 0-6.174 1.816-2.525 6.355C6.394 23.662 10.15 21.345 12 18.096c1.85 3.249 5.606 5.566 8.818 1.779 3.649-4.54.382-6.355-2.525-6.355-.363 0-.727-.039-1.09-.098 2.58.344 5.388-.532 6.173-3.175C23.622 9.418 24 4.458 24 3.768c0-.69-.139-1.861-.902-2.203-.659-.3-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z"/></svg>'
    when 'truthsocial'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M2.3,6.2c0-2.2,1.8-3.9,3.9-3.9H12v3.9H6.2V18c0,2.2,1.8,3.9,3.9,3.9H12V18h5.8V12H12V8.1h9.7V18c0,3.3-2.7,5.9-5.9,5.9h-5.7c-3.3,0-5.9-2.7-5.9-5.9V6.2H2.3z"/></svg>'
    when 'gettr'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221a.674.674 0 01-.323.574l-5.349 3.52 5.35 3.52a.674.674 0 01-.37 1.235H6.798a.674.674 0 01-.37-1.235l5.35-3.52-5.35-3.52a.674.674 0 01.37-1.236h10.404c.374 0 .692.287.692.662z"/></svg>'
    when 'rumble'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M15.398 5.891c-2.182 0-4.092 1.14-5.17 2.856a5.907 5.907 0 00-.728 2.854 5.908 5.908 0 00.729 2.855c1.077 1.716 2.987 2.856 5.169 2.856 3.348 0 6.065-2.633 6.065-5.711s-2.717-5.71-6.065-5.71zM2.537 3.32v17.36h4.932v-3.356c1.258 1.1 2.906 1.769 4.717 1.769.204 0 .406-.009.605-.026a7.635 7.635 0 003.605-1.276 7.622 7.622 0 003.066-6.081c0-4.403-3.7-7.977-8.26-7.977a8.343 8.343 0 00-3.733.882V3.32z"/></svg>'
    when 'telegram'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M11.944 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0a12 12 0 00-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 01.171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>'
    when 'threads'
      '<svg viewBox="0 0 24 24" fill="currentColor" width="100%" height="100%"><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.59 12c.025 3.086.718 5.496 2.057 7.164 1.432 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.343-.783-.979-1.404-1.825-1.836a8.88 8.88 0 01-.146.91c-.263 1.292-.862 2.312-1.724 2.942-.862.628-1.94.862-3.065.724-1.417-.172-2.563-.9-3.22-2.044-.545-.952-.713-2.127-.472-3.306.43-2.1 2.015-3.593 3.964-3.764 1.066-.094 2.065.126 2.906.617l.016-.093a26.755 26.755 0 01-.393-2.523c-1.293-.322-2.657-.41-3.96-.24-2.812.348-5.065 2.405-5.636 5.192-.33 1.612-.115 3.21.605 4.465.91 1.585 2.53 2.608 4.554 2.852 1.634.2 3.19-.157 4.454-1.078 1.295-.944 2.131-2.32 2.487-4.07.128-.63.19-1.27.189-1.91.913.622 1.6 1.462 2.003 2.382.69 1.578.735 4.164-1.335 6.191C18.236 22.785 15.77 23.871 12.186 24zm-.09-11.71c-1.245.1-2.28 1.067-2.565 2.457-.164.795-.09 1.544.206 2.06.37.644 1.04 1.04 1.882 1.143.742.091 1.467-.065 2.071-.504.658-.481 1.12-1.253 1.313-2.198.14-.685.158-1.269.069-1.81-.48-.34-1.18-.604-1.962-.685a6.685 6.685 0 00-1.014.037z"/></svg>'
    else
      '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="100%" height="100%"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71z" stroke-linecap="round" stroke-linejoin="round"/></svg>'
    end
  end

  public

  def research_status_badge(status)
    case status
    when 'not_started'
      content_tag(:span, 'Not Started', class: 'px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800')
    when 'entered'
      content_tag(:span, 'Entered', class: 'px-2 py-1 text-xs rounded-full bg-green-100 text-green-800')
    when 'not_found'
      content_tag(:span, 'Not Found', class: 'px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800')
    when 'verified'
      content_tag(:span, 'Verified', class: 'px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800')
    when 'rejected'
      content_tag(:span, 'Rejected', class: 'px-2 py-1 text-xs rounded-full bg-red-100 text-red-800')
    else
      content_tag(:span, status&.humanize || 'Unknown', class: 'px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800')
    end
  end

  def assignment_status_badge(status)
    case status
    when 'pending'
      content_tag(:span, 'Pending', class: 'px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800')
    when 'in_progress'
      content_tag(:span, 'In Progress', class: 'px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800')
    when 'completed'
      content_tag(:span, 'Completed', class: 'px-2 py-1 text-xs rounded-full bg-green-100 text-green-800')
    else
      content_tag(:span, status&.humanize || 'Unknown', class: 'px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800')
    end
  end
end
